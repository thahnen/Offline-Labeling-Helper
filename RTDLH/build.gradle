/*
    Zum Ausführen einfach den Gradle-Task: distribution/distZIP ausführen!
    => entstandene ZIP-Datei unter: build/distributions entnehmen!
 */

// Welche Plugins werden benötigt
plugins {
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.0.7'
    id 'org.beryx.jlink' version '2.9.4'
}

repositories {
    mavenCentral()
}

// Da sich Unit-Test-Module überschneiden, in den Dependencies das "hamcrest-core"-Modul deaktivieren!
dependencies {
    compile(group: 'org.openpnp', name: 'opencv', version: '3.4.2-1') {
        exclude group: "org.hamcrest", module: "hamcrest-core"
    }

    compile(group : "com.googlecode.json-simple", name: "json-simple", version: "1.1.1") {
        exclude group: "org.hamcrest", module: "hamcrest-core"
    }
}

// Angeben, welche JavaFX-Module benötigt werden!
javafx {
    version "12"
    modules = ["javafx.controls", "javafx.fxml"]
}

mainClassName = "$moduleName/com.thahnen.Main"

// Ist auch nicht unbedingt noetig!
jlink {
    options = ["--strip-debug", "--compress", "2", "--no-header-files", "--no-man-pages"]
    launcher {
        name = "RTDLH_JLINK"
    }

    imageZip = project.file("${buildDir}/dist/RTDLH-${javafx.platform.classifier}.zip")
}